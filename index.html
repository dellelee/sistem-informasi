<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem Pendaftaran BPJS</title>
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background: #222;
        }
        .container {
            width: 80%;
            margin: 30px auto;
            padding: 20px;
            background: #ddd;
        }
        h2 { text-align: center; margin-bottom: 20px; }
        .row { display: flex; margin-bottom: 15px; }
        .label { width: 200px; background:#2c66c3; padding: 10px; color:white; }
        .input { flex: 1; background:#2c66c3; padding:10px; }
        input, select { width: 100%; padding: 8px; border: none; }
        .btn-row { text-align:center; margin-top:20px; }
        button {
            padding:10px 25px;
            margin: 0 10px;
            background:#0f2343;
            color:white;
            border:none;
        }
        .dashboard-menu { display:flex; justify-content:center; gap:20px; margin-top:40px; }
        .menu-box {
            width:200px; height:120px; background:#2c66c3; color:white; display:flex;
            justify-content:center; align-items:center; font-size:20px; cursor:pointer;
        }
        .preview-box { background:#2c66c3; height:150px; margin-top:10px; color:white; padding:10px; }
        .nomor-antrian {
            width:120px; height:120px; background:#0f2343; color:white;
            border-radius:50%; display:flex; justify-content:center; align-items:center;
            font-size:40px; margin:20px auto;
        }
    </style>
</head>
<body>

<!-- DASHBOARD -->
<div class="container" id="dashboard" style="display:none;">
    <h2>Dashboard</h2>
    <div class="dashboard-menu">
        <div class="menu-box" onclick="gotoPage('inputPasien')">Mulai Pendaftaran</div>
        <div class="menu-box" onclick="gotoPage('dataPasien')">Data Pasien</div>
        <div class="menu-box">Riwayat</div>
    </div>
        <div class="menu-box">Data Pasien</div>
        <div class="menu-box">Riwayat</div>
    </div>
</div>
        <div class="menu-box">Data Pasien</div>
        <div class="menu-box">Riwayat</div>
    </div>
</div>

<!-- LOGIN -->
<div class="container" id="login""display:none;">
    <h2>Login</h2>
    <div class="row">
        <div class="label">Username</div>
        <div class="input"><input type="text"></div>
    </div>
    <div class="row">
        <div class="label">Password</div>
        <div class="input"><input type="password"></div>
    </div>
    <div class="btn-row">
        <button onclick="gotoPage('inputPasien')">Masuk</button>
        <button onclick="gotoPage('dashboard')">Keluar</button>
    </div>
</div>

<!-- INPUT PASIEN -->
<div class="container" id="inputPasien" style="display:none;">
    <h2>Input Pasien</h2>
    <div class="row"><div class="label">Nama</div><div class="input"><input></div></div>
    <div class="row"><div class="label">Alamat</div><div class="input"><input></div></div>
    <div class="row"><div class="label">Status</div><div class="input"><input></div></div>
    <div class="row"><div class="label">Agama</div><div class="input"><input></div></div>
    <div class="btn-row">
        <button onclick="gotoPage('pembayaran')">Lanjutkan</button>
        <button onclick="gotoPage('login')">Kembali</button>
    </div>
</div>

<!-- PEMBAYARAN -->
<div class="container" id="pembayaran" style="display:none;">
    <h2>Pembayaran</h2>
    <div class="row"><div class="label">Metode Pembayaran</div><div class="input"><select><option>BPJS</option><option>Umum</option></select></div></div>
    <div class="row"><div class="label">Nomor BPJS</div><div class="input"><input></div></div>
    <div class="row"><div class="label">NIK</div><div class="input"><input></div></div>
    <div class="btn-row">
        <button onclick="gotoPage('rujukan')">Cek Status & Lanjut</button>
        <button onclick="gotoPage('inputPasien')">Kembali</button>
    </div>
</div>

<!-- RUJUKAN -->
<div class="container" id="rujukan" style="display:none;">
    <h2>Rujukan Pasien</h2>
    <div class="row"><div class="label">Pilih Poli</div><div class="input"><select><option>Poli Umum</option><option>Poli Gigi</option></select></div></div>
    <div class="row"><div class="label">Upload Surat Rujukan</div><div class="input"><input type="file" onchange="previewSuratRujukan(event)"></div></div></div>
    <div class="row"><div class="label">Upload Foto</div><div class="input"><div class="preview-box" id="previewSurat">(Belum ada file)</div></div></div></div>

    <div class="btn-row">
        <button onclick="gotoPage('hasil')">Selesai</button>
        <button onclick="gotoPage('pembayaran')">Kembali</button>
    </div>
</div>

<!-- HASIL / NOMOR ANTRIAN -->
<div class="container" id="hasil" style="display:none;">
    <h2>Data Pasien</h2>
    <div class="row"><div class="label">Nama</div><div class="input">Asep Sudrajat</div></div>
    <div class="row"><div class="label">NIK</div><div class="input">02020484208</div></div>
    <div class="row"><div class="label">Nomor BPJS</div><div class="input">121030802183</div></div>

    <h3 style="text-align:center;">Nomor Antrian</h3>
    <div class="nomor-antrian">15</div>
    <div class="btn-row">
        <button onclick="window.print()">Print</button>
        <button onclick="gotoPage('dashboard')">Kembali ke Dashboard</button>
    </div>

</div>

<script>
let data = {};
let nomorAntrian = parseInt(localStorage.getItem('nomorAntrian')) || 1;
let semuaPasien = JSON.parse(localStorage.getItem('semuaPasien') || '[]');

function gotoPage(id){ document.querySelectorAll('.container').forEach(c=>c.style.display='none'); document.getElementById(id).style.display='block'; }

function simpanInputPasien(){ data.nama=document.getElementById('nama').value; data.alamat=document.getElementById('alamat').value; data.status=document.getElementById('status').value; data.agama=document.getElementById('agama').value; gotoPage('pembayaran'); }

function simpanPembayaran(){ data.metode=document.getElementById('metode').value; data.bpjs=document.getElementById('bpjs').value; data.nik=document.getElementById('nik').value; gotoPage('rujukan'); }

function previewSuratRujukan(e){ const f=e.target.files[0]; if(f){ document.getElementById('previewSurat').innerText=f.name; } }

function tampilkanHasil(){
    data.antrian = nomorAntrian;
    document.getElementById('hasilNama').innerText=data.nama;
    document.getElementById('hasilNIK').innerText=data.nik;
    document.getElementById('hasilBPJS').innerText=data.bpjs;
    document.querySelector('.nomor-antrian').innerText=data.antrian;

    semuaPasien.push({...data});
    localStorage.setItem('semuaPasien', JSON.stringify(semuaPasien));

    nomorAntrian++;
    localStorage.setItem('nomorAntrian', nomorAntrian);

    tambahKeTabel();
    gotoPage('hasil');
}

function tambahKeTabel(){
    const tbody=document.getElementById('tabelPasien'); tbody.innerHTML="";
    semuaPasien.forEach(p=>{
        const tr=document.createElement('tr'); tr.innerHTML=`<td>${p.nama}</td><td>${p.nik}</td><td>${p.bpjs}</td><td>${p.antrian}</td>`; tbody.appendChild(tr);
    });
}

tambahKeTabel();
</script>

<!-- DATA PASIEN -->
<div class="container" id="dataPasien" style="display:none;">
    <h2>Data Pasien</h2>
    <table border="1" width="100%" cellpadding="8" style="border-collapse:collapse; background:white;">
        <thead>
            <tr style="background:#2c66c3; color:white;">
                <th>Nama</th>
                <th>NIK</th>
                <th>Nomor BPJS</th>
                <th>Nomor Antrian</th>
            </tr>
        </thead>
        <tbody id="tabelPasien">
            <!-- Data otomatis masuk di sini -->
        </tbody>
    </table>
    <div class="btn-row"><button onclick="gotoPage('dashboard')">Kembali</button></div>
</div>

<script>
// Tambahkan data ke tabel setiap selesai pendaftaran
function tambahKeTabel(){
    const tbody = document.getElementById('tabelPasien');
    const tr = document.createElement('tr');
    tr.innerHTML = `
        <td>${data.nama}</td>
        <td>${data.nik}</td>
        <td>${data.bpjs}</td>
        <td>${data.antrian || 15}</td>
    `;
    tbody.appendChild(tr);
}
</script>

</body>
</html>

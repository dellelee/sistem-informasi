<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sistem Pendaftaran BPJS</title>
<style>
body{margin:0;font-family:Arial;background:#f0f0f0;}
.container{width:90%;max-width:900px;margin:30px auto;padding:25px;background:#fff;border-radius:10px;box-shadow:0 0 10px rgba(0,0,0,.1);} 
h2{text-align:center;margin-bottom:25px;} 
.row{display:flex;margin-bottom:15px;} 
.label{width:200px;background:#2c66c3;color:#fff;padding:10px;border-radius:5px 0 0 5px;} 
.input{flex:1;background:#e8eef8;padding:10px;border-radius:0 5px 5px 0;} 
input,select{width:100%;padding:10px;border:1px solid #ccc;border-radius:5px;} 
button{padding:10px 25px;background:#2c66c3;color:#fff;border:none;border-radius:5px;margin:5px;cursor:pointer;} 
button:hover{background:#193f77;} 
.dashboard-menu{display:flex;gap:20px;justify-content:center;} 
.menu-box{width:200px;height:120px;background:#2c66c3;color:white;display:flex;justify-content:center;align-items:center;font-size:20px;border-radius:10px;cursor:pointer;} 
.preview-img{width:150px;border-radius:10px;margin-top:10px;} 
.nomor-antrian{width:150px;height:150px;background:#2c66c3;color:#fff;border-radius:50%;display:flex;justify-content:center;align-items:center;font-size:50px;margin:20px auto;} 
table{width:100%;border-collapse:collapse;margin-top:20px;} 
th,td{padding:10px;border:1px solid #ccc;} 
th{background:#2c66c3;color:white;}
</style>
</head>
<body>

<!-- LOGIN -->
<div class="container" id="login">
<h2>Login</h2>
<div class="row"><div class="label">Username</div><div class="input"><input id="user"></div></div>
<div class="row"><div class="label">Password</div><div class="input"><input type="password" id="pass"></div></div>
<div style="text-align:center"><button onclick="cekLogin()">Masuk</button></div>
</div>

<!-- DASHBOARD -->
<div class="container" id="dashboard" style="display:none;">
<h2>Dashboard</h2>
<div class="dashboard-menu">
<div class="menu-box" onclick="gotoPage('inputPasien')">Input Pasien</div>
<div class="menu-box" onclick="gotoPage('dataPasien')">Data Pasien</div>
</div>
</div>

<!-- INPUT PASIEN -->
<div class="container" id="inputPasien" style="display:none;">
<h2>Input Data Pasien</h2>
<div class="row"><div class="label">Nama</div><div class="input"><input id="nama"></div></div>
<div class="row"><div class="label">NIK</div><div class="input"><input id="nik"></div></div>
<div class="row"><div class="label">Nomor BPJS</div><div class="input"><input id="bpjs"></div></div>
<div class="row"><div class="label">Upload Surat Rujukan</div><div class="input"><input type="file" id="surat" onchange="previewSurat(event)"></div></div>
<div class="row"><div class="label">Upload Foto</div><div class="input"><img id="previewFoto" class="preview-img"></div></div>
<div style="text-align:center"><button onclick="simpanPasien()">Lanjut</button> <button onclick="gotoPage('dashboard')">Kembali</button></div>
</div>

<!-- HASIL / NOMOR ANTRIAN -->
<div class="container" id="hasil" style="display:none;">
<h2>Nomor Antrian</h2>
<div class="row"><div class="label">Nama</div><div class="input" id="outNama"></div></div>
<div class="row"><div class="label">NIK</div><div class="input" id="outNIK"></div></div>
<div class="row"><div class="label">Nomor BPJS</div><div class="input" id="outBPJS"></div></div>
<div class="nomor-antrian" id="outAntrian"></div>
<div style="text-align:center"><button onclick="window.print()">Print</button><button onclick="gotoPage('dashboard')">Kembali ke Dashboard</button></div>
</div>

<!-- DATA PASIEN -->
<div class="container" id="dataPasien" style="display:none;">
<h2>Data Pasien</h2>
<table>
<thead><tr><th>Nama</th><th>NIK</th><th>BPJS</th><th>Antrian</th></tr></thead>
<tbody id="tabelPasien"></tbody>
</table>
<div style="text-align:center"><button onclick="gotoPage('dashboard')">Kembali</button></div>
</div>

<script>
let semuaPasien = JSON.parse(localStorage.getItem('data') || '[]');
let nomorAntrian = semuaPasien.length ? semuaPasien[semuaPasien.length-1].antrian+1 : 1;

function cekLogin(){ gotoPage('dashboard'); }
function gotoPage(id){ document.querySelectorAll('.container').forEach(c=>c.style.display='none'); document.getElementById(id).style.display='block'; if(id=='dataPasien') muatTabel(); }

function previewSurat(e){ const f=e.target.files[0]; if(f){ document.getElementById('previewFoto').src=URL.createObjectURL(f);} }

function simpanPasien(){ let nama=document.getElementById('nama').value; let nik=document.getElementById('nik').value; let bpjs=document.getElementById('bpjs').value;
let obj={nama,nik,bpjs,antrian:nomorAntrian++}; semuaPasien.push(obj); localStorage.setItem('data',JSON.stringify(semuaPasien));
document.getElementById('outNama').innerText=obj.nama;
document.getElementById('outNIK').innerText=obj.nik;
document.getElementById('outBPJS').innerText=obj.bpjs;
document.getElementById('outAntrian').innerText=obj.antrian;
gotoPage('hasil'); }

function muatTabel(){ let tb=document.getElementById('tabelPasien'); tb.innerHTML=''; semuaPasien.forEach(p=>{ tb.innerHTML+=`<tr><td>${p.nama}</td><td>${p.nik}</td><td>${p.bpjs}</td><td>${p.antrian}</td></tr>`; }); }
</script>

</body>
</html>
